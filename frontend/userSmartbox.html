<h2>User Smartbox</h2>
<div id="showSmartbox"></div>
<script>
    $(document).ready(function (){          //when document is ready

        $.ajax({
            url: "./backend/showSmartboxTable.php",     //makes post request to the url
            method: "POST",
            data: {su: 1},
            success: function (data) {      //on success display table for the specific user
                $("#showSmartbox").html(data);
            }
        });
    });

    function showAvailablePins(){
        let hostname = $("#availSbList").val();
        alert(hostname);
    }
    function showGroups(hostname){ // shows available groups from selected hostname
        $.ajax({
            url: "./backend/showSmartboxGroup.php",     //makes post request to the url
            method: "POST",
            data: {smGr: 1, hostname: hostname},
            success: function (data) {      //on success display table for the specific user
                $("#groupsContent").html(data);
            }
        });


    }

    function removePinFromGroup(Pin, Group){  //remove selected pins from selected group
        let confirm = prompt("Are you sure you want to make those changes?\nType 'Remove' to confirm it:");
        if (confirm === "Remove") {
            $.ajax({
                url: "/backend/removePinFromGroup.php",   //sends data over post request
                method: "POST",
                data: {removePin: 1, pinNr: Pin, group: Group},
                success: function (data) {      //on success remove pin from group and reloads page
                    alert(data);
                    location.reload();
                }
            });
        } else {
            alert("Remove got cancelled");
        }
    }

    function showAddPinToGroup(groupNr, hostname){ //show selectbox of output pins to add it on selected Group
        $.ajax({
            url: "./backend/showAvailablePins.php",     //makes post request to the url
            method: "POST",
            data: {avPin: 1, groupNr: groupNr, hostname: hostname},
            success: function (data) {      //on success display table for the specific user
                $("#addOutput").html("<h4>Add new pin to the Group "+ groupNr +":</h4>" + data);
            }
        });
    }

    function addPinToGroup(groupNr,hostname){   //add the selected available pin to the group
        let pin = $("#availablePins").val();
        $.ajax({
            url: "./backend/addPinsToGroup.php",     //makes post request to the url
            method: "POST",
            data: {addPin2Group: 1, groupNr: groupNr, pin: pin, hostname: hostname},
            success: function (data) {      //on success display table for the specific user
                alert(data);
                location.reload();
            }
        });
    }

    function deleteGroup(GroupNr){
        let confirm = prompt("Are you sure you want to make those changes?\nType 'Delete' to confirm it:");
        if (confirm === "Delete") {
            $.ajax({
                url: "/backend/deleteGroup.php",   //sends data over post request
                method: "POST",
                data: {deleteGroup: 1, groupNr: GroupNr},
                success: function (data) {      //on success deletes group and reloads page
                    alert(data);
                    location.reload();
                }
            });
        } else {
            alert("Remove got cancelled");
        }
    }

    function createGroup(){  //create a new group to add pins in
        let groupName = $("#inputGroupName").val();
        let groupDesc = $("#inputGroupDesc").val();
        let hostname = $("#availSbList").val();

        $.ajax({
            url: "./backend/createGroup.php",     //makes post request to the url
            method: "POST",
            data: {createGroup: 1, groupName: groupName, groupDesc: groupDesc, hostname: hostname},
            success: function (data) {      //on success display table for the specific user
                alert(data);
                location.reload();
            }
        });

    }

</script>